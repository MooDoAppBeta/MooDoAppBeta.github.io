{"x_jsVersion":1468488515328,"version":3,"file":"landing-min.js","sources":["landing.js","../../js/lib/almond.js","DemoManager.js","util.js","auth.js"],"names":[],"mappings":"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","sourcesContent":["if (typeof DEBUG === 'undefined') { DEBUG = true; }\r\n\r\nvar numRetries = 2;\r\nfunction GoogleApiLoaded()\r\n{\r\n    if(!window.isGoogleApiLoaded)\r\n    {\r\n        if (!window.gapi || !window.gapi.auth)\r\n        {\r\n            if(numRetries > 0)\r\n            {\r\n                numRetries --;\r\n                setTimeout(GoogleApiLoaded, 1000);\r\n            }\r\n        }\r\n        else\r\n        {\r\n            window.isGoogleApiLoaded = true;\r\n\r\n            require(['auth'], function (auth)\r\n            {\r\n                auth.init(function (isLoggedIn)\r\n                {\r\n                    require(['util'], function (util)\r\n                    {\r\n                        util.setSegment(Segment.ExistingUser);\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nvar loadYTVideo = false;\r\nif (window.location.pathname === '/about/' || window.location.pathname === '/')\r\n{\r\n    if (window.location.hash.indexOf('app%22:true') < 0 && window.location.hash.indexOf('\"app\":true') < 0)\r\n    {\r\n        loadYTVideo = true;\r\n    }\r\n}\r\n\r\nif (loadYTVideo)\r\n{\r\n    require(['DemoManager'], function (dm)\r\n    {\r\n        if (dm.isMobile() || dm.isLegacyBrowser())\r\n        {\r\n            dm.loadVideoPlayer();\r\n        }\r\n    });\r\n}\r\n\r\nrequirejs(['util', 'auth', 'DemoManager'], function (util, auth, DemoManager)\r\n{\r\nvar elementCache = {};\r\nfunction getEl(id)\r\n{\r\n    return (typeof id == 'string') ?\r\n            (elementCache[id] || (elementCache[id] = document.getElementById(id))) :\r\n            id;\r\n}\r\nfunction addPrefix(p)\r\n{\r\n    var prefix = '';\r\n    var v = [ 'ms', 'webkit', 'moz', 'o' ];\r\n    var s = document.body.style;\r\n    var p2 = p.charAt(0).toUpperCase() + p.slice(1);\r\n    if (typeof s[p] == 'string')\r\n    {\r\n        prefix = '';\r\n    }\r\n    else\r\n    {\r\n        for ( var i = 0; i < v.length; i++) {\r\n            if (typeof s[v[i] + p2] == 'string') {\r\n                prefix = v[i];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    var styleString = (prefix.length > 0) ? p.charAt(0).toUpperCase() + p.slice(1) : p;\r\n\r\n    if (prefix)\r\n    {\r\n        return prefix + styleString;\r\n    }\r\n    else\r\n    {\r\n        return styleString;\r\n    }\r\n}\r\n\r\nfunction hasFilterSupport()\r\n{\r\n    getEl('video').style.webkitFilter = 'blur(0px)';\r\n\r\n    if (window.getComputedStyle(getEl('video')).webkitFilter === 'blur(0px)')\r\n    {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction createDemo(id, d, dmode)\r\n{\r\n    if (dmode === undefined)\r\n    {\r\n        dmode = 0xC1;\r\n        dmode = dmode | 0x10; // No BG\r\n        dmode = dmode | 0x4; // Hide\r\n    }\r\n\r\n    d.id = id;\r\n\r\n    d.src = '/app/#demo=true&touch=false&dmode=' + dmode +\r\n                '&data=' +\r\n                d.data +\r\n                '&panes=' +\r\n                d.panes +\r\n                '&script=' +\r\n                (d.script ? d.script : 'none');\r\n\r\n\r\n    return d;\r\n}\r\n\r\nwindow.requestAnimationFrame = window.requestAnimationFrame ||\r\n                               window.webkitRequestAnimationFrame ||\r\n                               window.mozRequestAnimationFrame ||\r\n                               window.msRequestAnimationFrame ||\r\n                               window.oRequestAnimationFrame ||\r\n                               function (callback) { return window.setTimeout(callback, 1000/60); };\r\n\r\nif (!window.console) { window.console = { log: function () { }, error: function () { } }; }\r\nwindow.log = window.console.log.bind(window.console);\r\n\r\nvar transform = 'transform';\r\nvar transition = 'transition';\r\nvar animation = 'animation';\r\nvar animationDelay = 'animationDelay';\r\n\r\nvar els = [];\r\nvar elOffsets = [];\r\nvar elVis = [];\r\nvar popup = undefined;\r\nvar showingAlert = false;\r\nvar lastGSScale = 1;\r\nvar windowWidth;\r\nvar pageWidthIdeal = 920;\r\nvar openedGetStartedFrom;\r\n\r\nfunction runCommon()\r\n{\r\n    transform = addPrefix('transform');\r\n    transition = addPrefix('transition');\r\n    animation = addPrefix('animation');\r\n    animationDelay = addPrefix('animationDelay');\r\n\r\n    windowWidth = window.innerWidth;\r\n\r\n    if (DemoManager.isMobile())\r\n    {\r\n        document.documentElement.classList.add('mobile');\r\n        document.documentElement.classList.add(DemoManager.OS);\r\n    }\r\n\r\n    if (DemoManager.isLegacyBrowser())\r\n    {\r\n        document.documentElement.classList.add('prefImages');\r\n    }\r\n\r\n    if(DemoManager.OS === OSNames.Windows)\r\n    {\r\n        document.documentElement.classList.add('windows');\r\n    }\r\n\r\n    var ua = navigator.userAgent;\r\n    if (ua.indexOf('MSIE') !== -1 || ua.indexOf('Trident') !== -1)\r\n    {\r\n        document.documentElement.classList.add('ie');\r\n    }\r\n\r\n    window.openGetStarted = function (location)\r\n    {\r\n        util.sendEvent(PageEvents.GetStartedClicked, location);\r\n\r\n        util.setSegment(Segment.SignedUp);\r\n\r\n        if (DemoManager.isMobile())\r\n        {\r\n            sendToAppStore(DemoManager.OS);\r\n        }\r\n        else\r\n        {\r\n            window.location.pathname = '/app/';\r\n        }\r\n    };\r\n\r\n    window.hideGetStarted = function ()\r\n    {\r\n        document.documentElement.classList.remove('blurred');\r\n        document.documentElement.classList.remove('gettingStarted');\r\n    }\r\n\r\n    window.pageLoaded = true;\r\n    document.documentElement.style.opacity = 1;\r\n}\r\n\r\nfunction runUnsubscribe()\r\n{\r\n    var email = util.getURLHashParam('email');\r\n\r\n    util.XHR_PrivateAPI({\r\n        type: 'POST',\r\n        path: '/feedback/unsubscribe',\r\n        data:\r\n        {\r\n            email: email\r\n        },\r\n        cb: function (xhr)\r\n        {\r\n            var msg;\r\n            if (xhr.status === 200)\r\n            {\r\n                msg = 'You have been successfully unsubscribed from future emails.';\r\n            }\r\n            else\r\n            {\r\n                msg = 'There was an error unsubscribing. Please reply to the email to unsubscribe.';\r\n            }\r\n\r\n            document.getElementById('unsubMessage').innerText = msg;\r\n        }\r\n    });\r\n}\r\n\r\nfunction runPress()\r\n{\r\n    var demoData =\r\n    {\r\n        intro:\r\n        {\r\n            data: 'about.0',\r\n            panes: '1:help',\r\n            script: 'wait'\r\n        },\r\n        email:\r\n        {\r\n            data: 'landing-email.0',\r\n            panes: 'PaneGmail:PaneGmail:PaneGmail',\r\n            script: 'introEmail',\r\n            imgs: [\r\n                {\r\n                    src: '/img/ss/email-drag.png'\r\n                }\r\n            ]\r\n        },\r\n        style:\r\n        {\r\n            data: 'landing-style.0',\r\n            panes: '1:1,,progress:2,#Android',\r\n            script: 'introStyle',\r\n            imgs: [\r\n                {\r\n                    src: '/img/ss/intro-desktop.png'\r\n                }\r\n            ]\r\n        }\r\n    };\r\n\r\n    DemoManager.registerDemo(createDemo('demoIntro', demoData['intro'], 0x91));\r\n    DemoManager.registerDemo(createDemo('demoEmail', demoData['email']));\r\n    DemoManager.registerDemo(createDemo('demoStyle', demoData['style']));\r\n\r\n    DemoManager.registerListeners(/*onLoadedListener*/undefined, /*onDoneListener*/undefined, /*onInteractedListener*/undefined, /*onScroll*/undefined);\r\n\r\n    DemoManager.config({ preferImages: (DemoManager.isMobile() || DemoManager.isLegacyBrowser()), forceVideo: false, noLoadDelay: DemoManager.isMobile() });\r\n\r\n    DemoManager.beginLoading();\r\n}\r\n\r\nfunction runAbout()\r\n{\r\n    if (DemoManager.OS === OSNames.iOS)\r\n    {\r\n        document.getElementById('sectionTop').style.height = (window.innerHeight - 44) + 'px';\r\n    }\r\n\r\n    var normalMargin = 16;\r\n\r\n    util.sendEvent(PageEvents.LoadedPage, /*label*/undefined, /*nonInteractive*/true);\r\n\r\n    if (loadYTVideo)\r\n    {\r\n        var toHide;\r\n        if (DemoManager.isMobile() || DemoManager.isLegacyBrowser())\r\n        {\r\n            toHide = document.getElementById('demoTopWrapper');\r\n        }\r\n        else\r\n        {\r\n            toHide = document.getElementById('videoFrameWrapper');\r\n        }\r\n\r\n        if (toHide)\r\n        {\r\n            toHide.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    var currentUser = auth.getCurrentAppUser();\r\n\r\n    var cur = 1;\r\n    var ver = util.storage.getItem('landingVersionSeen');\r\n    if(ver && +ver >= cur)\r\n    {\r\n        if (currentUser && !DEBUG)\r\n        {\r\n            try\r\n            {\r\n                var referURL = new URL(document.referrer);\r\n                var referHost = referURL.hostname;\r\n\r\n                if (referHost !== \"##BR_MD_URL##\" && referHost !== 'dev.moo.do' && referHost !== 'beta.moo.do' && referHost !== 'localhost')\r\n                {\r\n                    auth.sendToApp();\r\n                    return;\r\n                }\r\n            }\r\n            catch (err)\r\n            {\r\n                // Do Nothing\r\n            }\r\n        }\r\n    }\r\n\r\n    util.storage.setItem('landingVersionSeen', cur);\r\n\r\n    var demoData =\r\n    {\r\n        top:\r\n        {\r\n            data: 'landing-top.0',\r\n            panes: 'PaneGmail:1:2',\r\n            script: 'top',\r\n            video: 'jdtUhbNoAlg',\r\n            videoEle: 'videoFrame'\r\n        },\r\n        email:\r\n        {\r\n            data: 'landing-email.0',\r\n            panes: 'PaneGmail:PaneGmail:PaneGmail',\r\n            script: 'introEmail',\r\n            imgs: [\r\n                {\r\n                    src: '/img/ss/email-drag.png',\r\n                    caption: 'View multiple Labels side by side and easily manage labels by dragging and dropping'\r\n                },\r\n                {\r\n                    src: '/img/ss/email-preview.png',\r\n                    caption: 'Handle your emails, tasks, and calendar in one app'\r\n                }\r\n            ]\r\n        },\r\n        style:\r\n        {\r\n            data: 'landing-style.0',\r\n            panes: '1:1,,progress:2,#Android',\r\n            script: 'introStyle',\r\n            imgs: [\r\n                {\r\n                    src: '/img/ss/intro-desktop.png',\r\n                    caption: 'Organize everything in one app with ##BR_NAME##\\'s deep integration with Google services'\r\n                },\r\n                {\r\n                    src: '/img/ss/intro-mobile.png',\r\n                    caption: '##BR_NAME## is available everywhere: iOS, Android, and any web browser',\r\n                    cls: 'imgPhone'\r\n                }\r\n            ]\r\n        }\r\n    };\r\n\r\n    DemoManager.registerDemo(createDemo('demoTop', demoData['top']));\r\n    DemoManager.registerDemo(createDemo('demoStyle', demoData['style']));\r\n    DemoManager.registerDemo(createDemo('demoEmail', demoData['email']));\r\n\r\n\r\n    document.documentElement.classList.remove('hidden');\r\n\r\n    var preferImages = DemoManager.isMobile() || DemoManager.isLegacyBrowser();\r\n\r\n    // Always show video\r\n    var forceVideo = false;//!hasFilterSupport();\r\n\r\n    var scrollDownHidden = false;\r\n    var onScroll = function (e)\r\n    {\r\n        if (!scrollDownHidden)\r\n        {\r\n            var scrollTop = DemoManager.getPageScrollOffset();\r\n\r\n            if (scrollTop > 40)\r\n            {\r\n                document.getElementById('scrollDown').classList.add('faded');\r\n                scrollDownHidden = true;\r\n            }\r\n        }\r\n    };\r\n\r\n    var onLoadedListener = function (demoID)\r\n    {\r\n    };\r\n\r\n    var onDoneListener = function (demoID)\r\n    {\r\n        if (demoID === 'demoTop')\r\n        {\r\n            util.sendEvent(PageEvents.IntroWatched, /*label*/undefined, /*nonInteractive*/true);\r\n\r\n            util.setSegment(Segment.Watched);\r\n\r\n            if (!preferImages && !scrollDownHidden)\r\n            {\r\n                document.getElementById('scrollDown').classList.remove('faded');\r\n            }\r\n        }\r\n    };\r\n\r\n    var onInteractedListener = function (demoID)\r\n    {\r\n        if (demoID === 'demoTop')\r\n        {\r\n            util.sendEvent(PageEvents.IntroClicked);\r\n        }\r\n        else\r\n        {\r\n            util.sendEvent(PageEvents.DemoClicked, demoID);\r\n        }\r\n\r\n        util.setSegment(Segment.Interacted);\r\n    };\r\n\r\n    DemoManager.registerListeners(onLoadedListener, onDoneListener, onInteractedListener, onScroll);\r\n\r\n    DemoManager.config({ preferImages: preferImages, forceVideo: forceVideo, noLoadDelay: DemoManager.isMobile() });\r\n\r\n    DemoManager.beginLoading();\r\n\r\n    document.getElementById('scrollDown').addEventListener('click', function (e)\r\n    {\r\n        document.getElementById('sectionEmail').scrollIntoView(true);\r\n    });\r\n\r\n    // function setupDemoButtons(ids)\r\n    // {\r\n    //     var selected = 'gtd';\r\n\r\n    //     function switchDemo(id)\r\n    //     {\r\n    //         DemoManager.sendFrameMessage('demoStyle', id);\r\n    //         getEl(selected).classList.remove('selected');\r\n    //         selected = id;\r\n    //         getEl(selected).classList.add('selected');\r\n    //     }\r\n\r\n    //     for (var i = 0; i < ids.length; i ++)\r\n    //     {\r\n    //         getEl(ids[i]).onclick = switchDemo.bind(this, ids[i]);\r\n    //     }\r\n    // }\r\n\r\n    // setupDemoButtons(['gtd', 'kanban', 'proj']);\r\n\r\n    if (DemoManager.isMobile() || DemoManager.isLegacyBrowser())\r\n    {\r\n        function calculateVideoWidth()\r\n        {\r\n            var videoWidth;\r\n            var videoEle = document.getElementById('videoFrame');\r\n\r\n            if (windowWidth >= pageWidthIdeal)\r\n            {\r\n                videoWidth = pageWidthIdeal - 2; // - border\r\n            }\r\n            else\r\n            {\r\n                var videoCStyle = window.getComputedStyle(videoEle.parentElement.parentElement);\r\n\r\n                videoWidth = parseInt(videoCStyle.width);\r\n            }\r\n\r\n            var videoHeight = 2 * Math.floor((videoWidth * (9 / 16)) / 2);\r\n\r\n            // console.log('Width: ', videoWidth, ' Height: ', videoHeight);\r\n\r\n            videoEle.style.width = videoWidth + 'px';\r\n            videoEle.style.height = videoHeight + 'px';\r\n        }\r\n\r\n        if (windowWidth >= pageWidthIdeal)\r\n        {\r\n            calculateVideoWidth();\r\n        }\r\n        else\r\n        {\r\n            setTimeout(calculateVideoWidth, 0);\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeDOM(id)\r\n{\r\n    var domElem = document.getElementById(id);\r\n\r\n    if (domElem)\r\n    {\r\n        domElem.parentNode.removeChild(domElem);\r\n    }\r\n}\r\n\r\nfunction hidePopups()\r\n{\r\n    if(popup)\r\n    {\r\n        popup.style.opacity = 0;\r\n        popup.style.display = '';\r\n        popup = undefined;\r\n    }\r\n}\r\n\r\nwindow.requestAuthorization = function (location)\r\n{\r\n    auth.requestAuthorization(openedGetStartedFrom && openedGetStartedFrom.indexOf('premium') >= 0);\r\n\r\n    util.sendEvent(PageEvents.LoginClicked, location);\r\n\r\n    util.setSegment(Segment.SignedUp);\r\n};\r\n\r\nfunction runPage()\r\n{\r\n    runCommon();\r\n\r\n    var pageName = window.location.pathname.toLowerCase();\r\n\r\n    if (pageName === '/about/' || pageName === '/')\r\n    {\r\n        runAbout();\r\n    }\r\n    else if (pageName === '/unsubscribe/')\r\n    {\r\n        runUnsubscribe();\r\n    }\r\n    else if (pageName === '/press/')\r\n    {\r\n        runPress();\r\n    }\r\n}\r\n\r\nif (window.location.hash.indexOf('app%22:true') >= 0 || window.location.hash.indexOf('\"app\":true') >= 0)\r\n{\r\n    window.location.pathname = '/app/';\r\n}\r\nelse\r\n{\r\n    if (document.readyState === 'interactive' || document.readyState === 'complete')\r\n    {\r\n        runPage();\r\n    }\r\n    else\r\n    {\r\n        document.addEventListener('DOMContentLoaded', runPage, false);\r\n    }\r\n}\r\n\r\n});\r\n\ndefine(\"landing\", function(){});\n\n","/**\r\n * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\r\n * Available via the MIT or new BSD license.\r\n * see: http://github.com/jrburke/almond for details\r\n */\r\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\r\n//be followed.\r\n/*jslint sloppy: true */\r\n/*global setTimeout: false */\r\n\r\nvar requirejs, require, define;\r\n(function (undef) {\r\n    var main, req, makeMap, handlers,\r\n        defined = {},\r\n        waiting = {},\r\n        config = {},\r\n        defining = {},\r\n        hasOwn = Object.prototype.hasOwnProperty,\r\n        aps = [].slice,\r\n        jsSuffixRegExp = /\\.js$/;\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    /**\r\n     * Given a relative module name, like ./something, normalize it to\r\n     * a real name that can be mapped to a path.\r\n     * @param {String} name the relative name\r\n     * @param {String} baseName a real name that the name arg is relative\r\n     * to.\r\n     * @returns {String} normalized name\r\n     */\r\n    function normalize(name, baseName) {\r\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\r\n            foundI, foundStarMap, starI, i, j, part,\r\n            baseParts = baseName && baseName.split(\"/\"),\r\n            map = config.map,\r\n            starMap = (map && map['*']) || {};\r\n\r\n        //Adjust any relative paths.\r\n        if (name && name.charAt(0) === \".\") {\r\n            //If have a base name, try to normalize against it,\r\n            //otherwise, assume it is a top-level require that will\r\n            //be relative to baseUrl in the end.\r\n            if (baseName) {\r\n                //Convert baseName to array, and lop off the last part,\r\n                //so that . matches that \"directory\" and not name of the baseName's\r\n                //module. For instance, baseName of \"one/two/three\", maps to\r\n                //\"one/two/three.js\", but we want the directory, \"one/two\" for\r\n                //this normalization.\r\n                baseParts = baseParts.slice(0, baseParts.length - 1);\r\n                name = name.split('/');\r\n                lastIndex = name.length - 1;\r\n\r\n                // Node .js allowance:\r\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n                }\r\n\r\n                name = baseParts.concat(name);\r\n\r\n                //start trimDots\r\n                for (i = 0; i < name.length; i += 1) {\r\n                    part = name[i];\r\n                    if (part === \".\") {\r\n                        name.splice(i, 1);\r\n                        i -= 1;\r\n                    } else if (part === \"..\") {\r\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\r\n                            //End of the line. Keep at least one non-dot\r\n                            //path segment at the front so it can be mapped\r\n                            //correctly to disk. Otherwise, there is likely\r\n                            //no path mapping for a path starting with '..'.\r\n                            //This can still fail, but catches the most reasonable\r\n                            //uses of ..\r\n                            break;\r\n                        } else if (i > 0) {\r\n                            name.splice(i - 1, 2);\r\n                            i -= 2;\r\n                        }\r\n                    }\r\n                }\r\n                //end trimDots\r\n\r\n                name = name.join(\"/\");\r\n            } else if (name.indexOf('./') === 0) {\r\n                // No baseName, so this is ID is resolved relative\r\n                // to baseUrl, pull off the leading dot.\r\n                name = name.substring(2);\r\n            }\r\n        }\r\n\r\n        //Apply map config if available.\r\n        if ((baseParts || starMap) && map) {\r\n            nameParts = name.split('/');\r\n\r\n            for (i = nameParts.length; i > 0; i -= 1) {\r\n                nameSegment = nameParts.slice(0, i).join(\"/\");\r\n\r\n                if (baseParts) {\r\n                    //Find the longest baseName segment match in the config.\r\n                    //So, do joins on the biggest to smallest lengths of baseParts.\r\n                    for (j = baseParts.length; j > 0; j -= 1) {\r\n                        mapValue = map[baseParts.slice(0, j).join('/')];\r\n\r\n                        //baseName segment has  config, find if it has one for\r\n                        //this name.\r\n                        if (mapValue) {\r\n                            mapValue = mapValue[nameSegment];\r\n                            if (mapValue) {\r\n                                //Match, update name to the new value.\r\n                                foundMap = mapValue;\r\n                                foundI = i;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (foundMap) {\r\n                    break;\r\n                }\r\n\r\n                //Check for a star map match, but just hold on to it,\r\n                //if there is a shorter segment match later in a matching\r\n                //config, then favor over this star map.\r\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\r\n                    foundStarMap = starMap[nameSegment];\r\n                    starI = i;\r\n                }\r\n            }\r\n\r\n            if (!foundMap && foundStarMap) {\r\n                foundMap = foundStarMap;\r\n                foundI = starI;\r\n            }\r\n\r\n            if (foundMap) {\r\n                nameParts.splice(0, foundI, foundMap);\r\n                name = nameParts.join('/');\r\n            }\r\n        }\r\n\r\n        return name;\r\n    }\r\n\r\n    function makeRequire(relName, forceSync) {\r\n        return function () {\r\n            //A version of a require function that passes a moduleName\r\n            //value for items that may need to\r\n            //look up paths relative to the moduleName\r\n            var args = aps.call(arguments, 0);\r\n\r\n            //If first arg is not require('string'), and there is only\r\n            //one arg, it is the array form without a callback. Insert\r\n            //a null so that the following concat is correct.\r\n            if (typeof args[0] !== 'string' && args.length === 1) {\r\n                args.push(null);\r\n            }\r\n            return req.apply(undef, args.concat([relName, forceSync]));\r\n        };\r\n    }\r\n\r\n    function makeNormalize(relName) {\r\n        return function (name) {\r\n            return normalize(name, relName);\r\n        };\r\n    }\r\n\r\n    function makeLoad(depName) {\r\n        return function (value) {\r\n            defined[depName] = value;\r\n        };\r\n    }\r\n\r\n    function callDep(name) {\r\n        if (hasProp(waiting, name)) {\r\n            var args = waiting[name];\r\n            delete waiting[name];\r\n            defining[name] = true;\r\n            main.apply(undef, args);\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\r\n            throw new Error('No ' + name);\r\n        }\r\n        return defined[name];\r\n    }\r\n\r\n    //Turns a plugin!resource to [plugin, resource]\r\n    //with the plugin being undefined if the name\r\n    //did not have a plugin prefix.\r\n    function splitPrefix(name) {\r\n        var prefix,\r\n            index = name ? name.indexOf('!') : -1;\r\n        if (index > -1) {\r\n            prefix = name.substring(0, index);\r\n            name = name.substring(index + 1, name.length);\r\n        }\r\n        return [prefix, name];\r\n    }\r\n\r\n    /**\r\n     * Makes a name map, normalizing the name, and using a plugin\r\n     * for normalization if necessary. Grabs a ref to plugin\r\n     * too, as an optimization.\r\n     */\r\n    makeMap = function (name, relName) {\r\n        var plugin,\r\n            parts = splitPrefix(name),\r\n            prefix = parts[0];\r\n\r\n        name = parts[1];\r\n\r\n        if (prefix) {\r\n            prefix = normalize(prefix, relName);\r\n            plugin = callDep(prefix);\r\n        }\r\n\r\n        //Normalize according\r\n        if (prefix) {\r\n            if (plugin && plugin.normalize) {\r\n                name = plugin.normalize(name, makeNormalize(relName));\r\n            } else {\r\n                name = normalize(name, relName);\r\n            }\r\n        } else {\r\n            name = normalize(name, relName);\r\n            parts = splitPrefix(name);\r\n            prefix = parts[0];\r\n            name = parts[1];\r\n            if (prefix) {\r\n                plugin = callDep(prefix);\r\n            }\r\n        }\r\n\r\n        //Using ridiculous property names for space reasons\r\n        return {\r\n            f: prefix ? prefix + '!' + name : name, //fullName\r\n            n: name,\r\n            pr: prefix,\r\n            p: plugin\r\n        };\r\n    };\r\n\r\n    function makeConfig(name) {\r\n        return function () {\r\n            return (config && config.config && config.config[name]) || {};\r\n        };\r\n    }\r\n\r\n    handlers = {\r\n        require: function (name) {\r\n            return makeRequire(name);\r\n        },\r\n        exports: function (name) {\r\n            var e = defined[name];\r\n            if (typeof e !== 'undefined') {\r\n                return e;\r\n            } else {\r\n                return (defined[name] = {});\r\n            }\r\n        },\r\n        module: function (name) {\r\n            return {\r\n                id: name,\r\n                uri: '',\r\n                exports: defined[name],\r\n                config: makeConfig(name)\r\n            };\r\n        }\r\n    };\r\n\r\n    main = function (name, deps, callback, relName) {\r\n        var cjsModule, depName, ret, map, i,\r\n            args = [],\r\n            callbackType = typeof callback,\r\n            usingExports;\r\n\r\n        //Use name if no relName\r\n        relName = relName || name;\r\n\r\n        //Call the callback to define the module, if necessary.\r\n        if (callbackType === 'undefined' || callbackType === 'function') {\r\n            //Pull out the defined dependencies and pass the ordered\r\n            //values to the callback.\r\n            //Default to [require, exports, module] if no deps\r\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\r\n            for (i = 0; i < deps.length; i += 1) {\r\n                map = makeMap(deps[i], relName);\r\n                depName = map.f;\r\n\r\n                //Fast path CommonJS standard dependencies.\r\n                if (depName === \"require\") {\r\n                    args[i] = handlers.require(name);\r\n                } else if (depName === \"exports\") {\r\n                    //CommonJS module spec 1.1\r\n                    args[i] = handlers.exports(name);\r\n                    usingExports = true;\r\n                } else if (depName === \"module\") {\r\n                    //CommonJS module spec 1.1\r\n                    cjsModule = args[i] = handlers.module(name);\r\n                } else if (hasProp(defined, depName) ||\r\n                           hasProp(waiting, depName) ||\r\n                           hasProp(defining, depName)) {\r\n                    args[i] = callDep(depName);\r\n                } else if (map.p) {\r\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\r\n                    args[i] = defined[depName];\r\n                } else {\r\n                    throw new Error(name + ' missing ' + depName);\r\n                }\r\n            }\r\n\r\n            ret = callback ? callback.apply(defined[name], args) : undefined;\r\n\r\n            if (name) {\r\n                //If setting exports via \"module\" is in play,\r\n                //favor that over return value and exports. After that,\r\n                //favor a non-undefined return value over exports use.\r\n                if (cjsModule && cjsModule.exports !== undef &&\r\n                        cjsModule.exports !== defined[name]) {\r\n                    defined[name] = cjsModule.exports;\r\n                } else if (ret !== undef || !usingExports) {\r\n                    //Use the return value from the function.\r\n                    defined[name] = ret;\r\n                }\r\n            }\r\n        } else if (name) {\r\n            //May just be an object definition for the module. Only\r\n            //worry about defining if have a module name.\r\n            defined[name] = callback;\r\n        }\r\n    };\r\n\r\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\r\n        if (typeof deps === \"string\") {\r\n            if (handlers[deps]) {\r\n                //callback in this case is really relName\r\n                return handlers[deps](callback);\r\n            }\r\n            //Just return the module wanted. In this scenario, the\r\n            //deps arg is the module name, and second arg (if passed)\r\n            //is just the relName.\r\n            //Normalize module name, if it contains . or ..\r\n            return callDep(makeMap(deps, callback).f);\r\n        } else if (deps && !deps.splice) {\r\n            //deps is a config object, not an array.\r\n            config = deps;\r\n            if (config.deps) {\r\n                req(config.deps, config.callback);\r\n            }\r\n            if (!callback) {\r\n                return;\r\n            }\r\n\r\n            if (callback.splice) {\r\n                //callback is an array, which means it is a dependency list.\r\n                //Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = relName;\r\n                relName = null;\r\n            } else {\r\n                deps = undef;\r\n            }\r\n        }\r\n\r\n        //Support require(['a'])\r\n        callback = callback || function () {};\r\n\r\n        //If relName is a function, it is an errback handler,\r\n        //so remove it.\r\n        if (typeof relName === 'function') {\r\n            relName = forceSync;\r\n            forceSync = alt;\r\n        }\r\n\r\n        //Simulate async callback;\r\n        if (forceSync) {\r\n            main(undef, deps, callback, relName);\r\n        } else {\r\n            //Using a non-zero value because of concern for what old browsers\r\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\r\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\r\n            //If want a value immediately, use require('id') instead -- something\r\n            //that works in almond on the global level, but not guaranteed and\r\n            //unlikely to work in other AMD implementations.\r\n            setTimeout(function () {\r\n                main(undef, deps, callback, relName);\r\n            }, 0);\r\n        }\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Just drops the config on the floor, but returns req in case\r\n     * the config return value is used.\r\n     */\r\n    req.config = function (cfg) {\r\n        return req(cfg);\r\n    };\r\n\r\n    /**\r\n     * Expose module registry for debugging and tooling\r\n     */\r\n    requirejs._defined = defined;\r\n\r\n    define = function (name, deps, callback) {\r\n        if (typeof name !== 'string')\r\n        {\r\n            throw new Error('Incorrect module build - no module name');\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!deps || !deps.splice) {\r\n            //deps is not an array, so probably means\r\n            //an object literal or factory function for\r\n            //the value. Adjust args.\r\n            callback = deps;\r\n            deps = [];\r\n        }\r\n\r\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\r\n            waiting[name] = [name, deps, callback];\r\n        }\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n}());\r\n\ndefine(\"../../js/lib/almond\", function(){});\n\n","if (typeof DEBUG === 'undefined') { DEBUG = true; }\r\n\r\ndefine('DemoManager', [],\r\nfunction() {\r\n\r\nif (DEBUG && (window.location.hash.indexOf('phantom=true') >= 0))\r\n{\r\n    var isFunction = function (o) {\r\n      return typeof o == 'function';\r\n    };\r\n\r\n    var bind,\r\n      slice = [].slice,\r\n      proto = Function.prototype,\r\n      featureMap;\r\n\r\n    featureMap = {\r\n      'function-bind': 'bind'\r\n    };\r\n\r\n    function has(feature) {\r\n      var prop = featureMap[feature];\r\n      return isFunction(proto[prop]);\r\n    }\r\n\r\n    // check for missing features\r\n    if (!has('function-bind')) {\r\n      // adapted from Mozilla Developer Network example at\r\n      // https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind\r\n      bind = function bind(obj) {\r\n        var args = slice.call(arguments, 1),\r\n          self = this,\r\n          nop = function () {\r\n          },\r\n          bound = function () {\r\n            return self.apply(this instanceof nop ? this : (obj || {}), args.concat(slice.call(arguments)));\r\n          };\r\n        nop.prototype = this.prototype || {}; // Firefox cries sometimes if prototype is undefined\r\n        bound.prototype = new nop();\r\n        return bound;\r\n      };\r\n      proto.bind = bind;\r\n    }\r\n}\r\n\r\nwindow.OSNames =\r\n{\r\n    Android: 'Android',\r\n    Chrome: 'Chrome',\r\n    iOS: 'iOS',\r\n    Windows: 'Windows',\r\n    OSX: 'OSX',\r\n};\r\n\r\nfunction DemoManager()\r\n{\r\n    this.init();\r\n\r\n    this._preferImages = this.isMobile();\r\n    this._forceVideo = this.isMobile() || this.isLegacyBrowser();\r\n    this._noLoadDelay = this.isMobile();\r\n    this._isRetina = this.isRetina();\r\n    this._isLegacy = this.isLegacyBrowser();\r\n\r\n    this._onDemoLoaded = function () { };\r\n    this._onDemoDone = function () { };\r\n    this._onDemoInteracted = function () { };\r\n\r\n    this.configLoaded = false;\r\n    this.videoLoaded = false;\r\n\r\n    this._loadingVideoPlayer = false;\r\n    this._videoLibLoaded = false;\r\n    this._videoQueue = [ ];\r\n\r\n    this.demos = [ ];\r\n\r\n    this.demoIndex= 0;\r\n    this.loadingDemo = undefined;\r\n\r\n    window.addEventListener('message', this.receiveFrameMessage.bind(this), false);\r\n}\r\n\r\nDemoManager.prototype =\r\n{\r\n    init: function ()\r\n    {\r\n        this.checkPageScroll = this.checkPageScroll.bind(this);\r\n\r\n        var userAgent = navigator.userAgent;\r\n        if (userAgent.indexOf('iPad') !== -1 || userAgent.indexOf('iPhone') !== -1 || userAgent.indexOf('iPod') !== -1)\r\n        {\r\n            this.OS = OSNames.iOS;\r\n            this._isMobile = true;\r\n        }\r\n        else if (userAgent.indexOf('Android') !== -1)\r\n        {\r\n            this.OS = OSNames.Android;\r\n            this._isMobile = true;\r\n        }\r\n        else if(!!userAgent.match(/IEMobile/i))\r\n        {\r\n            this.OS = OSNames.Windows;\r\n            this._isMobile = true;\r\n        }\r\n        else if (userAgent.indexOf('Win') !== -1)\r\n        {\r\n            this.OS = OSNames.Windows;\r\n        }\r\n        else if (userAgent.indexOf('Mac') !== -1)\r\n        {\r\n            this.OS = OSNames.OSX;\r\n        }\r\n\r\n        if (!this._isMobile)\r\n        {\r\n            var check = false;\r\n\r\n            (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\r\n\r\n            if (!check)\r\n            {\r\n                var mediaQuery = '(max-device-width: 620px)';\r\n\r\n                if (window.matchMedia && window.matchMedia(mediaQuery).matches)\r\n                {\r\n                    check = true;\r\n                }\r\n            }\r\n\r\n            this._isMobile = check;\r\n        }\r\n    },\r\n    registerListeners: function (onLoaded, onDone, onInteracted, onScroll)\r\n    {\r\n        if (onLoaded)\r\n        {\r\n            this._onDemoLoaded = onLoaded;\r\n        }\r\n\r\n        if (onDone)\r\n        {\r\n            this._onDemoDone = onDone;\r\n        }\r\n\r\n        if (onInteracted)\r\n        {\r\n            this._onDemoInteracted = onInteracted;\r\n        }\r\n\r\n        if (onScroll)\r\n        {\r\n            this._onDemoScroll = onScroll;\r\n        }\r\n    },\r\n    config: function (config)\r\n    {\r\n        this._preferImages = config.preferImages;\r\n        this._forceVideo = config.forceVideo;\r\n        this._noLoadDelay = config.noLoadDelay;\r\n        this._onlyOne = config.onlyOne;\r\n\r\n        if (config.isMobile !== undefined)\r\n        {\r\n            this._isMobile = config.isMobile;\r\n        }\r\n\r\n        this.configLoaded = true;\r\n    },\r\n    isMobile: function ()\r\n    {\r\n        return this._isMobile;\r\n    },\r\n    isLegacyBrowser: function ()\r\n    {\r\n        if (this._isLegacy === undefined)\r\n        {\r\n            this._isLegacy = false;\r\n\r\n            var userAgent = navigator.userAgent\r\n\r\n            var majorVersion = 1000;\r\n            var minorVersion = 1000;\r\n\r\n            if (userAgent.indexOf('MSIE') !== -1 || userAgent.indexOf('Trident') !== -1)\r\n            {\r\n                this._isLegacy = true;\r\n            }\r\n            else if (userAgent.indexOf('Chrome') !== -1 || userAgent.indexOf('CriOS') !== -1)\r\n            {\r\n                var re = new RegExp('Chrome/([0-9]{1,})\\.');\r\n\r\n                if (re.exec(userAgent) != null)\r\n                {\r\n                    majorVersion = parseFloat(RegExp.$1);\r\n                }\r\n\r\n                if (majorVersion < 26)\r\n                {\r\n                    this._isLegacy = true;\r\n                }\r\n            }\r\n            else if (userAgent.indexOf('Android') !== -1)\r\n            {\r\n                var re = new RegExp('Linux; Android ([0-9]{1,})\\.([0-9]{1,})\\.');\r\n\r\n                if (re.exec(userAgent) != null)\r\n                {\r\n                    majorVersion = parseFloat(RegExp.$1);\r\n                    minorVersion = parseFloat(RegExp.$2);\r\n                }\r\n\r\n                if (this.majorVersion < 4)\r\n                {\r\n                    this._isLegacy = true;\r\n                }\r\n            }\r\n            else if (userAgent.indexOf('Firefox') !== -1)\r\n            {\r\n                var re = new RegExp('Firefox/([0-9]{1,})\\.');\r\n\r\n                if (re.exec(userAgent) != null)\r\n                {\r\n                    majorVersion = parseFloat(RegExp.$1);\r\n                }\r\n\r\n                if (majorVersion < 16)\r\n                {\r\n                    this._isLegacy = true;\r\n                }\r\n            }\r\n            else if (userAgent.indexOf('Safari') !== -1)\r\n            {\r\n                var re = new RegExp('Version/([0-9]{1,})\\.([0-9]{1,})\\.');\r\n\r\n                if (re.exec(userAgent) != null)\r\n                {\r\n                    majorVersion = parseFloat(RegExp.$1);\r\n                    minorVersion = parseFloat(RegExp.$2);\r\n                }\r\n\r\n                if (majorVersion < 6)\r\n                {\r\n                    this._isLegacy = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this._isLegacy;\r\n    },\r\n    isRetina: function ()\r\n    {\r\n        if (this._isRetina === undefined)\r\n        {\r\n            var mediaQuery = '(-webkit-min-device-pixel-ratio: 1.5), (-moz-min-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)';\r\n\r\n            if (window.devicePixelRatio > 1 || (window.matchMedia && window.matchMedia(mediaQuery).matches))\r\n            {\r\n                this._isRetina = true;\r\n            }\r\n            else\r\n            {\r\n                this._isRetina = false;\r\n            }\r\n        }\r\n\r\n        return this._isRetina;\r\n    },\r\n    requireInteractivity: function ()\r\n    {\r\n        return (navigator.userAgent.indexOf('Edge') !== -1);\r\n    },\r\n    getPageScrollOffset: function()\r\n    {\r\n        return document.documentElement.scrollTop || document.body.scrollTop;\r\n    },\r\n    registerDemo: function (info)\r\n    {\r\n        console.assert(info.img || info.src, 'Must supply either an image or an iframe src');\r\n\r\n        this.demos.push(info);\r\n    },\r\n    registerDemos: function (infoArr)\r\n    {\r\n        for (var i = 0; i < infoArr.length; ++i)\r\n        {\r\n            this.registerDemo(infoArr[i]);\r\n        }\r\n    },\r\n    checkPageScroll: function ()\r\n    {\r\n        var buffer = 100,\r\n            h = window.innerHeight;\r\n\r\n        for (var i = 0; i < this.demos.length; i ++)\r\n        {\r\n            var d = this.demos[i],\r\n                el = document.getElementById(d.id);\r\n\r\n            var r = el.getBoundingClientRect();\r\n            if (r.bottom > -buffer && r.top < h + buffer)\r\n            {\r\n                if (!d.isLoaded && !d.isLoading)\r\n                {\r\n                    // console.log('load demo', i, d.data, r.top, r.bottom);\r\n                    this.loadDemo(d);\r\n                }\r\n            }\r\n\r\n            if (d.isLoaded)\r\n            {\r\n                var amt = Math.max(0, Math.min(h, r.bottom) - Math.max(0, r.top)),\r\n                    perc = amt / r.height;\r\n\r\n                if (perc >= 0.5 && !d.isPlaying)\r\n                {\r\n                    // console.log('on screen play', i, d.data, r.top, r.bottom);\r\n\r\n                    // On screen so it should start playing\r\n                    this.sendFrameMessage(d.id, 'resume');\r\n                    d.isPlaying = true;\r\n                }\r\n                else if (perc < 0.5 && d.isPlaying)\r\n                {\r\n                    // console.log('off screen pause', i, d.data, r.top, r.bottom);\r\n\r\n                    // Off screen so it should stop playing\r\n                    this.sendFrameMessage(d.id, 'pause');\r\n                    d.isPlaying = false;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    beginLoading: function ()\r\n    {\r\n        if (!this.isMobile() && !this.isLegacyBrowser())\r\n        {\r\n            var startScroll = this.getPageScrollOffset();\r\n\r\n            var onscroll = function (e)\r\n            {\r\n                requestAnimationFrame(this.checkPageScroll);\r\n\r\n                if ((this.getPageScrollOffset() - startScroll) > 500)\r\n                {\r\n                    require([ 'util' ], function (util)\r\n                    {\r\n                        util.sendEvent(PageEvents.PageScroll);\r\n\r\n                        util.setSegment(Segment.Browsed);\r\n                    });\r\n                }\r\n\r\n                if (this._onDemoScroll)\r\n                {\r\n                    this._onDemoScroll(e);\r\n                }\r\n            }.bind(this);\r\n\r\n            this.checkPageScroll();\r\n\r\n            document.addEventListener('scroll', onscroll);\r\n            window.addEventListener('resize', onresize);\r\n        }\r\n        else\r\n        {\r\n            this.loadDemos();\r\n        }\r\n    },\r\n    receiveFrameMessage: function (e)\r\n    {\r\n        switch (e.data)\r\n        {\r\n            case 'demoReady':\r\n                this.notifyOfLoad(e);\r\n                this.checkPageScroll();\r\n                break;\r\n            case 'done':\r\n                this.notifyOfDone(e);\r\n                break;\r\n            case 'userInteracted':\r\n                this.notifyOnInteracted(e);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    _getDemoForMessage: function (e)\r\n    {\r\n        var demo;\r\n\r\n        for (var i = 0; i < this.demos.length; i ++)\r\n        {\r\n            var d = this.demos[i];\r\n            var el = document.getElementById(d.id);\r\n\r\n            if (el.contentWindow === e.source)\r\n            {\r\n                demo = d;\r\n\r\n                break;\r\n            }\r\n        }\r\n\r\n        return demo;\r\n    },\r\n    notifyOfLoad: function (e)\r\n    {\r\n        var demo = this._getDemoForMessage(e);\r\n\r\n        if (demo)\r\n        {\r\n            demo.isLoaded = true;\r\n\r\n            var el = document.getElementById(demo.id);\r\n\r\n            var parent = el.parentElement;\r\n            parent.classList.remove('icon-spinner');\r\n\r\n            this._onDemoLoaded(demo.id);\r\n        }\r\n\r\n        // if(!this._onlyOne)\r\n        // {\r\n        //     this._loadNextDemo();\r\n        // }\r\n    },\r\n    notifyOfDone: function (e)\r\n    {\r\n        var demo = this._getDemoForMessage(e);\r\n\r\n        this._onDemoDone(demo.id);\r\n    },\r\n    notifyOnInteracted: function (e)\r\n    {\r\n        var demo = this._getDemoForMessage(e);\r\n\r\n        this._onDemoInteracted(demo.id);\r\n    },\r\n    // getImgSrc: function (src)\r\n    // {\r\n    //     if (this.isRetina())\r\n    //     {\r\n    //         return src.split('.')[0] + '@2x.' + src.split('.')[1];\r\n    //     }\r\n\r\n    //     return src;\r\n    // },\r\n    loadVideoPlayer: function ()\r\n    {\r\n        if (!this._loadingVideoPlayer)\r\n        {\r\n            this._loadingVideoPlayer = true;\r\n\r\n            window.onYouTubeIframeAPIReady = function ()\r\n            {\r\n                this._videoLibLoaded = true;\r\n\r\n                for (var i = 0; i < this._videoQueue.length; ++i)\r\n                {\r\n                    this.createVideo(this._videoQueue[i]);\r\n                }\r\n\r\n                this._videoQueue = [ ];\r\n            }.bind(this);\r\n\r\n            var tag = document.createElement('script');\r\n\r\n            tag.src = \"https://www.youtube.com/iframe_api\";\r\n\r\n            var firstScriptTag = document.getElementsByTagName('script')[0];\r\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\r\n        }\r\n    },\r\n    requestVideoLoad: function (elementID, videoID, cb)\r\n    {\r\n        var ele = document.getElementById(elementID);\r\n\r\n        if (ele)\r\n        {\r\n            ele.parentElement.parentElement.classList.add('icon-spinner');\r\n        }\r\n\r\n        if (!this._videoLibLoaded)\r\n        {\r\n            this._videoQueue.push({ elementID: elementID, videoID: videoID, cb: cb });\r\n\r\n            this.loadVideoPlayer();\r\n        }\r\n        else\r\n        {\r\n            this.createVideo({ elementID: elementID, videoID: videoID, cb: cb });\r\n        }\r\n    },\r\n    createVideo: function (data)\r\n    {\r\n        var origMuteState = false;\r\n        var ytplayer;\r\n        var duration;\r\n\r\n        var self = this;\r\n\r\n        function createPlayer()\r\n        {\r\n            ytplayer = new YT.Player(\r\n                data.elementID,\r\n                {\r\n                    videoId: data.videoID,\r\n                    playerVars:\r\n                    {\r\n                        'enablejsapi': 1,\r\n                        'autoplay': self.isMobile() ? 0 : 1,\r\n                        'autohide': 1,\r\n                        'controls': 1,\r\n                        'rel': 0,\r\n                        'showinfo': 0,\r\n                        'vq': 'hd720',\r\n                        // 'theme': 'light',\r\n                        // 'color': 'white',\r\n                        'origin': '//' + window.location.host\r\n                    },\r\n                    events:\r\n                    {\r\n                        'onReady': onPlayerReady,\r\n                        'onStateChange': onPlayerStateChange,\r\n                        'onError': onPlayerError\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        function checkVideo()\r\n        {\r\n            if (ytplayer.getPlayerState() === 1)\r\n            {\r\n                if (ytplayer.getCurrentTime() >= duration - 1.5)\r\n                {\r\n                    ytplayer.pauseVideo();\r\n\r\n                    self.notifyOfDone({ });\r\n\r\n                    if (origMuteState)\r\n                    {\r\n                        ytplayer.unMute();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function onPlayerReady(ev)\r\n        {\r\n            // console.log('Player Ready: ', ev);\r\n            duration = ytplayer.getDuration();\r\n            setInterval(checkVideo, 1000);\r\n\r\n            if (!self.isMobile())\r\n            {\r\n                origMuteState = ev.target.isMuted();\r\n                ev.target.mute();\r\n            }\r\n\r\n            setTimeout(function ()\r\n            {\r\n                var videoBlocker = document.getElementById('videoBlocker');\r\n\r\n                videoBlocker.style.display = 'none';\r\n            }, 4500);\r\n\r\n            self.notifyOfLoad({ });\r\n\r\n            var vidEle = document.getElementById(data.elementID);\r\n\r\n            vidEle.parentElement.parentElement.classList.remove('icon-spinner');\r\n\r\n            if (data.cb)\r\n            {\r\n                data.cb();\r\n            }\r\n\r\n            if (self.isMobile())\r\n            {\r\n                var videoFrame = document.getElementById(data.elementID);\r\n                videoFrame.style.opacity = 1;\r\n            }\r\n        }\r\n\r\n        function onPlayerStateChange(ev)\r\n        {\r\n            // console.log('Player StateChange: ', ev.data);\r\n\r\n            switch (ev.data)\r\n            {\r\n                case YT.PlayerState.PLAYING:\r\n                    var videoFrame = document.getElementById(data.elementID);\r\n                    videoFrame.style.opacity = 1;\r\n\r\n                    self._onDemoLoaded(data.elementID);\r\n\r\n                    break;\r\n                case YT.PlayerState.PAUSED:\r\n                case YT.PlayerState.BUFFERING:\r\n                case YT.PlayerState.CUED:\r\n                case YT.PlayerState.UNSTARTED:\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        function onPlayerError(ev)\r\n        {\r\n            console.log('Player Error: ', ev);\r\n        }\r\n\r\n        createPlayer();\r\n    },\r\n    _loadNextDemo: function ()\r\n    {\r\n        if (this.isMobile())\r\n        {\r\n            while (this.demoIndex < this.demos.length && this.demos[this.demoIndex].noMobile)\r\n            {\r\n                this.demoIndex++;\r\n            }\r\n        }\r\n        else if (!this.isMobile())\r\n        {\r\n            while (this.demoIndex < this.demos.length && this.demos[this.demoIndex].mobileOnly)\r\n            {\r\n                this.demoIndex++;\r\n            }\r\n        }\r\n\r\n        if (this.demoIndex < this.demos.length)\r\n        {\r\n            if (this.videoLoaded && this.demos[this.demoIndex].noVideo)\r\n            {\r\n                this.demoIndex++;\r\n\r\n                this._loadNextDemo();\r\n\r\n                return;\r\n            }\r\n\r\n            var shouldDelayLoad = this._loadDemo(this.demoIndex);\r\n\r\n            this.demoIndex++;\r\n\r\n            if (this._noLoadDelay || !shouldDelayLoad)\r\n            {\r\n                this._loadNextDemo();\r\n            }\r\n        }\r\n    },\r\n    loadDemos: function ()\r\n    {\r\n        for (var i = 0; i < this.demos.length; i ++)\r\n        {\r\n            this._loadDemo(i);\r\n        }\r\n    },\r\n    _loadDemo: function (index)\r\n    {\r\n        // console.log('loading demo', index);\r\n        var demo = this.demos[index];\r\n        this.loadDemo(demo);\r\n    },\r\n    loadDemo: function (demo)\r\n    {\r\n        demo.isLoading = true;\r\n\r\n        var replaceEle = document.getElementById(demo.id),\r\n            shouldDelayLoad = false;\r\n\r\n        if (replaceEle)\r\n        {\r\n            if ((this._preferImages || !demo.src) && (this.isMobile() || !demo.forceDesktopIFrame) && demo.imgs !== undefined)\r\n            {\r\n                for (var i = 0; i < demo.imgs.length; i ++)\r\n                {\r\n                    var d = demo.imgs[i];\r\n                    // Create and use an image element\r\n                    var imgEle = document.createElement('img');\r\n\r\n                    imgEle.id = replaceEle.id;\r\n\r\n                    imgEle.className = 'demoimg' + (d.cls ? (' ' + d.cls) : '');\r\n\r\n                    // imgEle.src = this.getImgSrc(demo.imgs[i]);\r\n                    imgEle.src = d.src;\r\n\r\n                    // replaceEle.id = '';\r\n                    // replaceEle.style.overflowY = 'hidden';\r\n                    // replaceEle.style.overflowX ='auto';\r\n\r\n                    replaceEle.appendChild(imgEle);\r\n\r\n                    if (d.caption)\r\n                    {\r\n                        var captionEl = document.createElement('div');\r\n\r\n                        captionEl.className = 'caption';\r\n                        captionEl.textContent = d.caption;\r\n\r\n                        replaceEle.appendChild(captionEl);\r\n                    }\r\n                }\r\n            }\r\n            else if ((this._preferImages || this._forceVideo) && demo.video !== undefined && demo.video.indexOf('/') >= 0)\r\n            {\r\n                shouldDelayLoad = false;\r\n\r\n                var videoEle = document.createElement('video');\r\n\r\n                videoEle.id = 'v' + replaceEle.id;\r\n\r\n                videoEle.className = 'demoimg';\r\n\r\n                videoEle.preload = 'auto';\r\n                videoEle.autoplay = this.isMobile() ? '' : 'autoplay';\r\n                videoEle.controls = 'controls';\r\n\r\n                for (var i = 0; i < demo.video.length; ++i)\r\n                {\r\n                    var srcEle = document.createElement('source');\r\n\r\n                    srcEle.src = demo.video[i].path;\r\n                    srcEle.type = demo.video[i].type;\r\n\r\n                    videoEle.appendChild(srcEle);\r\n                }\r\n\r\n                // Flash Fallback Object\r\n                // {\r\n                //     var flashObj = document.createElement('object');\r\n\r\n                //     flashObj.type = 'application/x-shockwave-flash';\r\n                //     flashObj.data = 'http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf';\r\n\r\n                //     function cParam(name, value)\r\n                //     {\r\n                //         var p = document.createElement('param');\r\n                //         p.name = name;\r\n                //         p.value = value;\r\n                //         return p;\r\n                //     }\r\n\r\n                //     flashObj.appendChild(cParam('movie', 'http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf'));\r\n                //     flashObj.appendChild(cParam('allowFullscreen', 'true'));\r\n                //     flashObj.appendChild(cParam('wmode', 'transparent'));\r\n                //     flashObj.appendChild(cParam('flashVars', \"config={'playlist':['http://gwmoo.ngrok.com/video/moodo.png',{'url':'http://gwmoo.ngrok.com/video/moodo.mp4','autoPlay':true}]}\"));\r\n\r\n                //     //videoEle.appendChild(flashObj);\r\n                //     videoEle = flashObj;\r\n                // }\r\n\r\n                replaceEle.id = '';\r\n                replaceEle.style.overflow = 'hidden';\r\n\r\n                replaceEle.appendChild(videoEle);\r\n\r\n                this.videoLoaded = true;\r\n\r\n                window.postMessage('video_started', '*');\r\n            }\r\n            else if ((this._preferImages || this._forceVideo) && demo.video !== undefined && demo.video.indexOf('/') < 0)\r\n            {\r\n                shouldDelayLoad = false;\r\n\r\n                this.requestVideoLoad(demo.videoEle, demo.video, demo.videoCB);\r\n            }\r\n            else if (demo.src && (!this.isMobile() || demo.forceDesktopIFrame))\r\n            {\r\n                shouldDelayLoad = true;\r\n\r\n                // Create and use an iframe element\r\n                var frameEle = document.createElement('iframe');\r\n\r\n                frameEle.id = replaceEle.id;\r\n\r\n                frameEle.className = replaceEle.className + ' demo';\r\n\r\n                frameEle.setAttribute('seamless', 'seamless');\r\n                frameEle.setAttribute('data-recording-ignore', 'html');\r\n                frameEle.scrolling = 'no';\r\n\r\n                frameEle.src = demo.src;\r\n\r\n                var parent = replaceEle.parentElement;\r\n                parent.replaceChild(frameEle, replaceEle);\r\n\r\n                parent.classList.add('icon-spinner');\r\n            }\r\n            else\r\n            {\r\n                // Nothing\r\n            }\r\n        }\r\n        return shouldDelayLoad;\r\n    },\r\n    sendFrameMessage: function (id, data)\r\n    {\r\n        var ele = document.getElementById(id);\r\n\r\n        if (ele)\r\n        {\r\n            var frame = ele.contentWindow;\r\n            if (frame)\r\n            {\r\n                frame.postMessage(data, '*');\r\n            }\r\n        }\r\n        else if(DEBUG)\r\n        {\r\n            debugger;\r\n        }\r\n    }\r\n\r\n};\r\n\r\nreturn new DemoManager();\r\n\r\n});\r\n\n","define('util', ['DemoManager'],\r\nfunction(DemoManager)\r\n{\r\n\r\nwindow.PageEvents =\r\n{\r\n    LoadedPage: 'LoadedPage',\r\n    PageScroll: 'PageScroll',\r\n    IntroWatched: 'IntroWatched',\r\n    IntroClicked: 'IntroClicked',\r\n    LoginClicked: 'LoginClicked',\r\n    GetStartedClicked: 'GetStartedClicked',\r\n    DemoClicked: 'DemoClicked',\r\n    AppClicked: 'AppClicked',\r\n    SocialClicked: 'SocialClicked'\r\n};\r\n\r\nwindow.Segment =\r\n{\r\n    DriveBy: 0,\r\n    Watched: 1,\r\n    Browsed: 2,\r\n    Interacted: 3,\r\n    SocialClicked: 4,\r\n    AppClicked: 5,\r\n    SignedUp: 6,\r\n    ExistingUser: 7\r\n};\r\n\r\nvar self = { };\r\n\r\nif (typeof String.prototype.startsWith !== 'function')\r\n{\r\n    if (Object.defineProperty)\r\n    {\r\n        Object.defineProperty(String.prototype, 'startsWith',\r\n        {\r\n            enumerable: false,\r\n            configurable: false,\r\n            writable: false,\r\n            value: function (searchString, position)\r\n            {\r\n                position = position || 0;\r\n\r\n                return this.lastIndexOf(searchString, position) === position;\r\n            }\r\n        });\r\n    }\r\n    else\r\n    {\r\n        String.prototype.startsWith = function (str)\r\n        {\r\n            return this.lastIndexOf(str, 0) === 0;\r\n        };\r\n    }\r\n}\r\n\r\nself._segment = Segment.DriveBy;\r\n\r\nself.setSegment = function (seg)\r\n{\r\n    if (seg > self._segment)\r\n    {\r\n        self._segment = seg;\r\n    }\r\n};\r\n\r\nvar segmentNames = [ 'DriveBy', 'Watched', 'Browsed', 'Interacted', 'SocialClicked', 'AppClicked', 'SignedUp', 'ExistingUser' ];\r\nself.getSegment = function ()\r\n{\r\n    return segmentNames[self._segment];\r\n};\r\n\r\nself.getURLHashParam = function (key)\r\n{\r\n    var queryString = window.location.hash.substring(1);\r\n\r\n    var regex = /([^&=]+)=([^&]*)/g;\r\n    var m;\r\n\r\n    while (m = regex.exec(queryString))\r\n    {\r\n        if (decodeURIComponent(m[1]) === key)\r\n        {\r\n            return decodeURIComponent(m[2]);\r\n        }\r\n    }\r\n\r\n    return undefined;\r\n};\r\n\r\nfunction generateQueryString(data)\r\n{\r\n    var queryString = '';\r\n\r\n    if (typeof data == 'object')\r\n    {\r\n        var queryArr = [ ]\r\n\r\n        for (key in data)\r\n        {\r\n            queryArr[queryArr.length] = encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\r\n        }\r\n\r\n        queryString = queryArr.join('&').replace(/%20/g, '+');\r\n    }\r\n    else\r\n    {\r\n        queryString = data;\r\n    }\r\n\r\n    return queryString;\r\n};\r\n\r\nvar maxRetryCount = 5;\r\nvar retryTimeouts = [ 0, 5, 15, 35, 80, 170 ];\r\nvar retryErrorCodes = [ 408, 500, 502, 503, 504 ];\r\n\r\nself.XHR = function (params)\r\n{\r\n    var url = params.url;\r\n    var type = params.type;\r\n    var cb = params.cb;\r\n    var data = params.data;\r\n    var headers = params.headers;\r\n    var autoRetry = params.autoRetry;\r\n    var maxRetries = params.maxRetries || 2;\r\n    var currentRetries = 0;\r\n\r\n    var username = params.username;\r\n    var password = params.password;\r\n\r\n    // In debug mode always re-route to the local server instead of the production API version.\r\n    if (DEBUG)\r\n    {\r\n        var productionAPI = '//##BR_SM_REST_URL##/';\r\n\r\n        if (url.startsWith('http:' + productionAPI))\r\n        {\r\n            var debugAPI = 'http://' + window.location.hostname + ':9024/';\r\n\r\n            url = url.replace('http:' + productionAPI, debugAPI);\r\n        }\r\n        else if (url.startsWith('https:' + productionAPI))\r\n        {\r\n            var debugAPI = 'http://' + window.location.hostname + ':9024/';\r\n\r\n            url = url.replace('https:' + productionAPI, debugAPI);\r\n        }\r\n    }\r\n\r\n    function retry()\r\n    {\r\n        if (currentRetries < maxRetries)\r\n        {\r\n            currentRetries++;\r\n\r\n            setTimeout(sendXHR, retryTimeouts[currentRetries] * 1000);\r\n        }\r\n        else\r\n        {\r\n            log('XHR Failed to retry - reached max retry limit');\r\n        }\r\n    }\r\n\r\n    function sendXHR()\r\n    {\r\n        var xhr = new XMLHttpRequest();\r\n\r\n        xhr.onreadystatechange = function ()\r\n        {\r\n            if (xhr.readyState !== 4)\r\n            {\r\n                return;\r\n            }\r\n\r\n            // If the XHR was a failure, setup request for retry if requested and valid\r\n            if (xhr.status !== 200)\r\n            {\r\n                // If we have retries left, enable the retry field so callers can perform a retry\r\n                if (currentRetries < maxRetries)\r\n                {\r\n                    xhr.retry = retry;\r\n\r\n                    // Some callers may request auto-retry, in which case do not call the CB. Invalid requests\r\n                    // do not get automatically retried as there is an issue with the payload.\r\n                    if (autoRetry && retryErrorCodes.indexOf(xhr.status) >= 0)\r\n                    {\r\n                        xhr.retry();\r\n                    }\r\n                    else\r\n                    {\r\n                        // When not auto-retrying, the caller is responsible for performing the retry themselves\r\n                        cb(xhr);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    // If we have exhausted the retry count, ensure that the CB is still called with a failure code\r\n                    cb(xhr);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // No need to retry on success\r\n                cb(xhr);\r\n            }\r\n        };\r\n\r\n        if (username && password)\r\n        {\r\n            xhr.open(type.toUpperCase(), url, /*async*/true, username, password);\r\n        }\r\n        else\r\n        {\r\n            xhr.open(type.toUpperCase(), url, /*async*/true);\r\n        }\r\n\r\n\r\n        if (headers)\r\n        {\r\n            for (var key in headers)\r\n            {\r\n                xhr.setRequestHeader(key, headers[key]);\r\n            }\r\n        }\r\n\r\n        if (data)\r\n        {\r\n            xhr.setRequestHeader('Accept', '*/*');\r\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n\r\n            var queryString = generateQueryString(data);\r\n            xhr.send(queryString);\r\n        }\r\n        else\r\n        {\r\n            //xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\r\n\r\n            xhr.send();\r\n        }\r\n    }\r\n\r\n    sendXHR();\r\n};\r\n\r\nself.XHR_PrivateAPI = function (params)\r\n{\r\n    var protocol = 'https:';\r\n    var basePath = '/private/v1';\r\n\r\n    // TODO: Does not support authenticated requests\r\n\r\n    var XHRParams =\r\n    {\r\n        type: params.type,\r\n        url: protocol + '//##BR_SM_REST_URL##' + basePath + params.path,\r\n        data: params.data,\r\n        cb: params.cb,\r\n        headers: params.headers,\r\n        autoRetry: params.autoRetry,\r\n        maxRetries: params.maxRetries\r\n    };\r\n\r\n    self.XHR(XHRParams);\r\n};\r\n\r\nself.XHR_PublicAPI = function (params)\r\n{\r\n    // TODO: Implement\r\n};\r\n\r\nself.sendEvent = function (action, label, nonInteractive)\r\n{\r\n    if (window.ga)\r\n    {\r\n        try\r\n        {\r\n            ga('send', 'event', 'LandingPage', action, label, /*value*/undefined, nonInteractive);\r\n        }\r\n        catch (err)\r\n        {\r\n            self.reportError(err);\r\n        }\r\n    }\r\n};\r\n\r\nself.tagSession = function (field, value)\r\n{\r\n    if (window.smartlook)\r\n    {\r\n        try\r\n        {\r\n            smartlook('tag', field, value);\r\n        }\r\n        catch (err)\r\n        {\r\n            self.reportError(err);\r\n        }\r\n    }\r\n};\r\n\r\nif (window.ga)\r\n{\r\n    ga(function (tracker)\r\n    {\r\n        var clientId = tracker.get('clientId');\r\n\r\n        self.tagSession('name', clientId);\r\n    });\r\n}\r\n\r\nwindow.__BEFORE_UNLOAD = function ()\r\n{\r\n    self.tagSession('segment', self.getSegment());\r\n};\r\n\r\nself.reportError = function (err)\r\n{\r\n    if (window.Rollbar)\r\n    {\r\n        Rollbar.error(err);\r\n    }\r\n};\r\n\r\nvar dummyStorage = { getItem: function () { }, setItem: function () { }, removeItem: function () { }, clear: function () { } };\r\n\r\ntry\r\n{\r\n    self.__storage = window.localStorage || dummyStorage;\r\n}\r\ncatch (err)\r\n{\r\n    self.__storage = dummyStorage;\r\n}\r\n\r\nfunction dummyStorageGetFn() { }\r\n\r\n\r\nself.storage =\r\n{\r\n    getItem: (self.__storage.getItem || function (key, cb)\r\n    {\r\n        return this.get(key, cb || dummyStorageGetFn);\r\n    }).bind(self.__storage),\r\n\r\n    setItem: (self.__storage.setItem || function (key, value)\r\n    {\r\n        var obj = { };\r\n\r\n        obj[key] = value;\r\n\r\n        this.set(obj);\r\n    }).bind(self.__storage),\r\n\r\n    removeItem: (self.__storage.removeItem || function (key, cb)\r\n    {\r\n        this.remove(key, cb);\r\n    }).bind(self.__storage),\r\n\r\n    clear: (self.__storage.clear || function (cb)\r\n    {\r\n        this.clear(cb);\r\n    }).bind(self.__storage)\r\n};\r\n\r\n\r\nwindow.sendToAppStore = function (appStore, location)\r\n{\r\n    if (DemoManager.isMobile() && DemoManager.OS)\r\n    {\r\n        appStore = DemoManager.OS;\r\n\r\n        var url;\r\n        switch (appStore)\r\n        {\r\n            case OSNames.Android:\r\n                url = 'https://play.google.com/store/apps/details?id=moo.do';\r\n                break;\r\n            case OSNames.Chrome:\r\n                url = 'https://chrome.google.com/webstore/detail/moodo/iffimmolghilclfndeiebgppddmagofk';\r\n                break;\r\n            case OSNames.iOS:\r\n                url = 'https://itunes.apple.com/us/app/moo.do-organize-your-way/id889830074?ls=1&mt=8';\r\n                break;\r\n            case OSNames.Windows:\r\n                utl = 'https://www.moo.do/app/';\r\n                break;\r\n            default:\r\n                debugger;\r\n                break;\r\n        }\r\n\r\n        window.open(url);\r\n    }\r\n\r\n    if (appStore && location)\r\n    {\r\n        self.sendEvent(PageEvents.AppClicked, location);\r\n\r\n        self.setSegment(Segment.AppClicked);\r\n    }\r\n};\r\n\r\nvar SocialLink =\r\n{\r\n    Facebook: 'Facebook',\r\n    Twitter: 'Twitter',\r\n    Google: 'Google',\r\n    Email: 'Email',\r\n};\r\n\r\nwindow.sendToSocialMedia = function (social, location)\r\n{\r\n    if (social === SocialLink.Email)\r\n    {\r\n        window.open('mailto:##BR_CT_EMAIL##', '_blank');\r\n    }\r\n\r\n    self.sendEvent(PageEvents.SocialClicked, location);\r\n\r\n    self.setSegment(Segment.SocialClicked);\r\n};\r\n\r\nreturn self;\r\n});\n","define('auth', ['util'],\r\nfunction(util) {\r\nfunction auth()\r\n{\r\n    this.clientId = \"597847337936.apps.googleusercontent.com\";\r\n\r\n    this.scopes =\r\n    [\r\n        'https://www.googleapis.com/auth/drive.file',\r\n        'https://www.googleapis.com/auth/userinfo.email',\r\n        'https://www.googleapis.com/auth/drive.install',\r\n        'https://www.googleapis.com/auth/drive.appdata'\r\n    ];\r\n\r\n    this.isLoggedIn = false;\r\n}\r\nauth.prototype = {\r\n    init: function (cb)\r\n    {\r\n        gapi.auth.init(); // Always call init on load so popup doesn't get blocked later\r\n\r\n        this.authenticate(/*immediate*/true, cb);\r\n    },\r\n    getCurrentAppUser: function ()\r\n    {\r\n        try\r\n        {\r\n            var localSettings = window.localStorage.getItem('localSettings');\r\n\r\n            var localSettingsObj = JSON.parse(localSettings);\r\n\r\n            if (localSettingsObj)\r\n            {\r\n                var currentUser = localSettingsObj.values.Default.activeUser;\r\n\r\n                return currentUser;\r\n            }\r\n        }\r\n        catch (err)\r\n        {\r\n            log('Error getting app user: ', err);\r\n        }\r\n\r\n        return undefined;\r\n    },\r\n    requestAuthorization: function (goPremium)\r\n    {\r\n        var ua = navigator.userAgent;\r\n\r\n        if (!window.gapi || !window.gapi.auth)\r\n        {\r\n            this.sendToApp(false, goPremium);\r\n        }\r\n        else if (ua.indexOf('MSIE') !== -1 || ua.indexOf('Trident') !== -1)\r\n        {\r\n            // Send directly to app for login for IE as immediate login does not currently work\r\n            this.sendToApp(false, goPremium);\r\n        }\r\n        else\r\n        {\r\n            this.authenticate(false, function (isAuthorized)\r\n            {\r\n                if (isAuthorized)\r\n                {\r\n                    this.getEmailAddr(function(userInfo)\r\n                    {\r\n                        var currentUser = this.getCurrentAppUser();\r\n\r\n                        if (currentUser === userInfo.email)\r\n                        {\r\n                            this.sendToApp(false, goPremium);\r\n                        }\r\n                        else\r\n                        {\r\n                            this.sendToApp(userInfo.email, goPremium);\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n                else\r\n                {\r\n                    this.sendToApp();\r\n                }\r\n            }.bind(this));\r\n        }\r\n    },\r\n    sendToApp: function (forceUser, goPremium)\r\n    {\r\n        var host = window.location.host;\r\n\r\n        // if (host === 'beta.moo.do')\r\n        // {\r\n        //     host = 'www.moo.do';\r\n        // }\r\n\r\n        var inviteParam = util.getURLHashParam('invite');\r\n\r\n        var newAddr;\r\n\r\n        if (forceUser)\r\n        {\r\n            newAddr = window.location.protocol + '//' + host + '/app/#user=' + encodeURIComponent(forceUser);\r\n        }\r\n        else\r\n        {\r\n            newAddr = window.location.protocol + '//' + host + '/app/#login=true';\r\n        }\r\n\r\n        if (inviteParam)\r\n        {\r\n            newAddr += '&invite=' + inviteParam;\r\n        }\r\n\r\n        if(goPremium)\r\n        {\r\n            newAddr += '&premium=true';\r\n        }\r\n\r\n        window.location.href = newAddr;\r\n    },\r\n    authenticate: function (immediate, callback)\r\n    {\r\n        var config =\r\n        {\r\n            'client_id': this.clientId,\r\n            'scope': this.scopes,\r\n            'immediate': immediate,\r\n            'authuser': -1\r\n        };\r\n\r\n        var standalone = !!window.navigator.standalone || (window.navigator.userAgent.indexOf('FluidApp') >= 0);\r\n\r\n        var requireCustomRedirect = standalone || this.isMobro();\r\n\r\n        if (requireCustomRedirect && !immediate)\r\n        {\r\n            config['redirect_uri'] = window.location.protocol + '//' + window.location.host + '/app/';\r\n        }\r\n\r\n        gapi.auth.authorize(config, function (token)\r\n        {\r\n            //console.log('Landing Page Auth Token: ', token);\r\n\r\n            if (token && !token.error)\r\n            {\r\n                this.isLoggedIn = true;\r\n\r\n                console.log('Landing Page Auth Logged In');\r\n            }\r\n            else\r\n            {\r\n                console.log('Landing Page Auth Logged Out');\r\n            }\r\n\r\n            if (callback)\r\n            {\r\n                callback(this.isLoggedIn);\r\n            }\r\n        }.bind(this));\r\n    },\r\n    getEmailAddr: function (cb)\r\n    {\r\n        var token = gapi.auth.getToken();\r\n\r\n        if (token)\r\n        {\r\n            var url = 'https://www.googleapis.com/oauth2/v2/userinfo?alt=json&access_token=' + token.access_token;\r\n\r\n            util.XHR({\r\n                type: 'GET',\r\n                url: url,\r\n                autoRetry: true,\r\n                cb: function (xhr)\r\n                {\r\n                    if (xhr.status === 200)\r\n                    {\r\n                        var userInfoParsed = { };\r\n\r\n                        try\r\n                        {\r\n                            userInfoParsed = JSON.parse(xhr.responseText);\r\n                        }\r\n                        catch (err)\r\n                        {\r\n                            log('Error: ', err);\r\n                        }\r\n\r\n                        cb(userInfoParsed);\r\n                    }\r\n                    else\r\n                    {\r\n                        cb();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    isMobro: function ()\r\n    {\r\n        var supported = null;\r\n\r\n        try\r\n        {\r\n            new ActiveXObject(\"\");\r\n        }\r\n        catch (e)\r\n        {\r\n            // FF has ReferenceError here\r\n            errorName = e.name;\r\n        }\r\n\r\n        try\r\n        {\r\n            supported = !!new ActiveXObject(\"htmlfile\");\r\n        }\r\n        catch (e)\r\n        {\r\n            supported = false;\r\n        }\r\n\r\n        if (errorName != 'ReferenceError' && supported==false)\r\n        {\r\n            supported = false;\r\n        }\r\n        else\r\n        {\r\n            supported =true;\r\n        }\r\n\r\n        return !supported;\r\n    },\r\n};\r\n\r\nreturn new auth();\r\n\r\n});\n"]}